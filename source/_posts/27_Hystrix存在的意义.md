---
title: Hystrix存在的意义
date: 2020-02-14 15:00:39
tags:
categories:
- SpringCloud
---

## Hystrix解决了什么问题
根据我自己的理解,Hystrix最最主要的解决了一个问题,那就是`服务雪崩`。
服务雪崩的典型场景就是`下游一个接口拖死了上游N多个服务`,因为上游服务的线程全部hang在这个接口上，没有其他能力处理新的请求，导致服务假死，这种假死是蔓延型的，很快就会蔓延至整个业务

## Hystrix解决哪几个方向的问题
- 服务down掉
- 接口超时
- 接口返回错误

## Hystrix怎么解决的问题
- 资源隔离
    - 典型的就是`请求线程池隔离`,一个接口响应有问题最多拖死对应的线程池的线程，而不会影响其他的业务
- 超时控制
    - 线程不能一直被hang住，这个时候要设置一个超时时间，当超过时间时，立即走事先预设好的降级逻辑，有损的提供服务
- 错误控制
    - 这个和超时类似，直接降级
- 调用方限流
    - 上面几种都是对用服务提供方的防范措施，调用方也应该对自己的调用量有一个预期，给自己限制一个请求上限，避免大流量将提供方压垮，实现一般是线程池实现，如果不能提交到线程池中，立即走降级逻辑
- 基于统计的熔断
    - 当提供方在一段时间内出现一定量的非预期行为时（超时，错误等），调用方会直接切断对此提供方的调用，直接走降级逻辑，以节省请求资源