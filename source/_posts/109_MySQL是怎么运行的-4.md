---
title: Mysql的查询入门
date: 2020-03-20 23:30:39
categories:
- MySQL
tags:
- 连接
---

## 索引的查询的type
- const
  - 唯一索引的等值查询
- ref
  - 非唯一索引的的等值查询
- range
  - 索引范围查询
- index
  - 全索引扫描(适用于联合索引覆盖，但是未使用左前缀原则)
- all
  - 全表扫描
- index_merge
  - Intersection
    - 多个索引取交集。因为索引是有序的，所以取交集很快，取交集之后可以减少回表次数。
  - Union
    - 多个索引取并集。因为索引是有序的，所以取并集也很快，取并集之后也可以减少回表次数。

## 什么是表的连接
连接就是把各个表中的记录都取出来进行匹配，并把匹配后的数据发送给客户端。如果不加任何条件，那么产生的结果就是笛卡儿积

## 表连接的分类
- 内连接
  - 驱动表中的某条数据在被驱动表存在时才显示这条连接记录
- 外连接
  - 驱动表的某条数据在被驱动表中不存在的时候，这条连接记录依然显示，驱动表正常显示，被驱动表对应字段显示为NULL
- 外连接的分类
  - 左(外)连接
    - 左边的表作为驱动表
  - 右(外)连接
    - 右边的表作为驱动表

## 表连接的实现算法
- 循环嵌套连接(Nested-Loop Join)
  - 就是多充循环嵌套，驱动表每取出一条数据，去被驱动表全表扫描一次，性能很差
- 基于块的循环嵌套连接(Block Nested-Loop Join)
  - 也是多重循环嵌套，区别是驱动表一次取出多条数据，然后去驱动表全表扫描时批量比较，减少了IO次数，性能有一定提升，批量的大小取决于join buffer的大小
- 基于索引的连接
  - 如果被驱动表对应的字段有索引，那么驱动表取出一条数据去被驱动表查询时就是索引操作，性能大大提升，使用连接时尽量使用这种方式