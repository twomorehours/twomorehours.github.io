---
title: 分布式系统概念
date: 2020-07-12 9:30:39
tags:
categories:
- java
- 分布式
---

## 概念
分布式系统是`软硬件分开部署`,`通过网络通信`的一种系统，我们平常见到的基本都可以称之为分布式系统，无论是`集群部署`，还是`系统间的分工协作`

## 分布式系统关注的点
- 吞吐量
    - 保证吞吐量的方式除了保证代码性能外，最通用的手段就是`集群部署`
- 可靠性
    - 保证可靠性最通用的方法也是`集群冗余部署`
- 扩展性(快速扩容)
    - 要实现服务的`无状态化`，方能快速扩容

## 架构分类

- all in one（单体架构）
    - 优点
        - 开发简单 
        - 性能好 
        - 运维简单 
        - 架构简单
    - 缺点
        - 隔离性差 
        - 协同效率低
- 分体架构
    - 优点
        - 迭代快 
        - 稳定性高 
        - 故障范围小 
        - 容易扩展
    - 缺点
        - 开发成本高 
        - 基础依赖度高 
        - 运维复杂 
        - 性能差

## 如何选择
- 结合公司情况和业务目标
- 架构不是一成不变
- 避免过度设计（够用就好）

## 分布式架构技术挑战
- 节点故障 
    - 节点多 
    - 问题的快速定位
- 机器性能差异 
    - 性能预估 
    - 合理利用资源
- 网络不可靠性  
    - 错误兼容
- 基础组件   
    - 通用
    - 赋能业务
- 服务治理 
    - 复杂度高


## 分布式架构技术点
- 运行环境
    - 物理机
    - 虚拟机
    - 容器
- 基础设施
    - nginx 
    - dns 
    - cdn
- 模块划分
    - 业务边界    
- 存储资源
    - rdbms 
    - kv 
    - 对象存储
- 基础组件
    - spring
    - other
- 测试运维
    - CI/CD 
    - devops

## 分布式系统的标准
- 可用性
    - 要保持持续可用 
- 性能/吞吐量：
    - 保证够用
- 扩展性
    - 无状态
- 一致性
    - 分布式事务

## 主要技术点
- 负载均衡
- session管理 
- 通讯 rpc
- 服务注册与发现
- 消息队列
- 配置中心
- 分布式锁
- 分布式事务
- 缓存/分布式缓存
- 存储/分布式存储


## 常见架构方式
- 单体架构
- 单体分层架构
    - 就是单体架构的水平拆分
- 微服务（SOA） 
    - 按照业务垂直拆
    - 存储独占
    - 有时候也会进行单个微服务的水平拆分

## 分布式架构的结构
    网关    鉴权 协议转发 数据校验 负载均衡
    业务    处理业务

## 分布式架构技术选型
    网关： spring-cloud-gateway / zuul
    监控平台： open-falcon / prometheus
    rpc： http / dubbo
    注册中心： zk / eureka
    mq: （日志）kafka/ （业务）rocketmq / rabbitmq
    配置中心: Apollo

