---
title: 设计一个生产环境可用的鉴权功能
date: 2019-04-10 21:30:39
categories:
- 设计模式
---

## 需求
提供对外的接口，在执行接口逻辑之前，要执行鉴权，也就是鉴别是不是信任的第三方发来的请求，同时保证请求不被篡改


## 设计
- 需要分配一个AppID 
- 需要分配一个秘钥
  
## 秘钥怎么用呢
- 加密解密
  - 参数太多，解密难
- 信息摘要
  - 同时正向，简单

## 增加保险
- 每个请求添加一个时间戳，验证执行的时间


## 最终
- 准备
  - 需要分配一个AppID ，同时分配一个秘钥
  
- 调用
  - 用AppID + 秘钥 + 时间戳 + 关键参数 做摘要

- 鉴权
  - 验证时间戳
  - 取出秘钥 做相同算法对比